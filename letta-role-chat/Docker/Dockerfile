# ==========================================
# 多阶段构建：前端 + 后端
# ==========================================

FROM node:20-alpine
WORKDIR /app

# 精简开发镜像：不在镜像内安装项目依赖，
# 在容器运行时通过挂载的项目目录安装依赖（符合开发挂载模式）。

# 可选：设置较小的默认 shell 命令，方便 docker run 时覆盖
CMD ["sh", "-c", "npm ci && npm run dev"]